<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoSimRPG - Accueil</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="menu-style.css">
    <link rel="stylesheet" href="step1-style.css"> 
    <link rel="stylesheet" href="index-style.css">

    <style>
        /* Variables de couleur (suppos√©es √† partir du design) */
        :root {
            --color-parchment: #f5eeda;
            --color-border: #8d6e63;
            --color-border-light: #a1887f;
            --color-dark-text: #3e2723;
            --color-gold: #c79121; /* Or un peu plus sombre pour le contraste */
            --color-parchment-darker: #e9e0c7;
        }

        /* Conteneur pour les cartes de choix */
        .choice-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 50px;
            padding: 50px 20px;
            flex-wrap: wrap;
        }

        /* Style des cartes de choix */
        .choice-card {
            width: 300px;
            height: 350px;
            background: var(--color-parchment);
            border: 3px solid var(--color-border);
            border-radius: 15px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
            text-align: center;
            padding: 30px;
            cursor: pointer;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative; /* Ajout pour le positionnement du badge */
            overflow: hidden; /* Cache les parties du badge qui d√©passent */
        }

        .choice-card:hover {
            transform: translateY(-15px) scale(1.05);
            box-shadow: 0 15px 30px rgba(0,0,0,0.3), 0 0 15px var(--color-gold);
        }
        
        /* Style pour la carte recommand√©e */
        .choice-card.recommended {
            border-color: var(--color-gold);
        }

        .choice-card.recommended::before {
            content: 'Recommand√©';
            position: absolute;
            top: 20px;
            right: -35px;
            background-color: var(--color-gold);
            color: var(--color-dark-text);
            padding: 5px 35px;
            transform: rotate(45deg);
            font-family: 'Cinzel', serif;
            font-weight: 700;
            font-size: 0.9em;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 2;
        }


        .choice-card .icon {
            font-size: 5em;
            margin-bottom: 20px;
        }

        .choice-card h3 {
            font-family: 'Cinzel', serif;
            font-size: 2em;
            color: var(--color-dark-text);
            margin: 0 0 15px 0;
        }

        .choice-card p {
            font-family: 'Lora', serif;
            font-size: 1.1em;
            line-height: 1.6;
            color: #444;
        }

        /* Classe pour masquer le contenu */
        .hidden {
            display: none;
        }

        /* Style pour la nouvelle section d√©taill√©e */
        .detailed-mechanics-section .step-card {
            background-color: var(--color-parchment-darker); /* Un fond l√©g√®rement diff√©rent pour distinguer */
            border-color: var(--color-border-light);
        }

        .detailed-mechanics-section h3 {
            font-size: 1.5em; /* Titres de section un peu plus petits */
        }

        .detailed-mechanics-section ul {
            text-align: left;
            padding-left: 20px;
        }
        
        .detailed-mechanics-section li {
            margin-bottom: 10px;
        }

        .detailed-mechanics-section code {
            background-color: #e0d9c9;
            padding: 2px 5px;
            border-radius: 4px;
            font-family: 'Courier New', Courier, monospace;
            color: #5d4037;
        }
        
        /* Style pour le bouton "Commencer" */
        .cta-button {
            display: inline-block;
            text-align: center;
            margin-top: 30px; /* Espace par rapport au texte au-dessus */
            margin-bottom: 20px; /* Espace par rapport aux cartes en-dessous */
            padding: 15px 40px;
            background-color: var(--color-border);
            color: var(--color-parchment);
            font-family: 'Cinzel', serif;
            font-size: 1.4em;
            font-weight: 700;
            text-decoration: none;
            border-radius: 10px;
            border-bottom: 4px solid #5d4037;
            box-shadow: 0 6px 15px rgba(0,0,0,0.2);
            transition: all 0.2s ease-in-out;
        }

        .cta-button:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            border-bottom-width: 8px;
            color: #fff;
        }
        
        .cta-button:active {
             transform: translateY(1px);
             box-shadow: 0 3px 10px rgba(0,0,0,0.2);
             border-bottom-width: 4px;
        }

    </style>
</head>
<body>

<nav class="floating-menu">
    <div class="menu-title">EcoSimRPG</div>
    <a href="index.html" id="nav-index" class="active">Accueil</a>
    <a href="step1.html" id="nav-step1" >√âtape 1<br><small>(Carte)</small></a>
    <a href="step2.html" id="nav-step2" class="nav-disabled">√âtape 2<br><small>(Conf. Lieux)</small></a>
    <a href="step3.html" id="nav-step3" class="nav-disabled">√âtape 3<br><small>(Gen.0)</small></a>
    <a href="step4.html" id="nav-step4" class="nav-disabled">√âtape 4<br><small>(Simulation)</small></a>
    <a href="step5.html" id="nav-step5" class="nav-disabled">√âtape 5<br><small>(Donn√©es)</small></a>
    <a href="editeur.html" id="nav-editor" style="border-top: 1px solid #ccc; color: #4a90e2;">√âditeur<br><small>(B√¢timents)</small></a>
    <a href="races_editor.html" id="nav-races-editor" style="color: #4a90e2;">√âditeur<br><small>(Races)</small></a>
</nav>

<div class="main-content-index">
    
    <div id="mode-selection-view">
        <header class="index-header">
            <h1 class="main-title">EcoSimRPG</h1>
            <p class="subtitle">Choisissez votre voie, Ma√Ætre du Monde</p>
        </header>
        <div class="choice-container">
            <div class="choice-card recommended" id="select-forge-mode">
                <div class="icon">üî®</div>
                <h3>Mode Forge</h3>
                <p>L'exp√©rience compl√®te. Cr√©ez votre monde pas √† pas, avec un contr√¥le total sur chaque √©tape pour un univers riche et sur mesure.</p>
            </div>
            <div class="choice-card" id="select-auto-mode">
                <div class="icon">üöÄ</div>
                <h3>Mode Full Auto</h3>
                <p>Laissez la magie op√©rer et g√©n√©rez un monde complet en un seul clic. Id√©al pour une inspiration rapide.</p>
            </div>
        </div>
    </div>

    <div id="forge-view" class="hidden">
        <header class="index-header">
            <h1 class="main-title">EcoSimRPG</h1>
            <p class="subtitle">Votre Outil de Cr√©ation de Mondes √âconomiques et Vivants</p>
        </header>

        <main class="index-main">
            <section class="intro-section" style="text-align: center;">
                <h2>Bienvenue, Ma√Ætre du Monde !</h2>
                <p style="text-align: left;">EcoSimRPG est bien plus qu'un simple g√©n√©rateur. C'est une forge divine, une suite d'outils con√ßue pour vous, l'architecte de mondes, afin de donner naissance √† des royaumes fantastiques d'une coh√©rence et d'une profondeur in√©gal√©es. Chaque √©tape est un acte de cr√©ation, de la premi√®re lueur de votre capitale √† la derni√®re rumeur dans la taverne du hameau le plus isol√©. Pr√©parez-vous √† insuffler la vie √† un univers qui respire, commerce et √©volue selon vos desseins.</p>
                
                <a href="step1.html" class="cta-button">Commencer</a>
            </section>

            <div class="steps-container">
                
                <div class="step-card" id="card-step1">
                    <div class="step-card-header">
                        <span class="step-number">1</span>
                        <h3>Forger le Royaume</h3>
                    </div>
                    <div class="step-card-body">
                        <p>C'est l'acte fondateur. Ici, vous ne placez pas de simples ic√¥nes, vous sculptez la g√©ographie politique et commerciale de votre cr√©ation.</p>
                        <ul>
                            <li><strong>√ârigez les Piliers de la Civilisation :</strong> Fondez vos premi√®res communaut√©s, d'une capitale rayonnante √† un modeste hameau.</li>
                            <li><strong>Tissez la Toile du Monde :</strong> Tracez les art√®res du royaume. L'algorithme d'<strong>Arbre Recouvrant Minimum</strong> assure que tous les lieux sont connect√©s de la mani√®re la plus efficace possible, puis ajoute des routes secondaires pour plus de r√©alisme.</li>
                            <li><strong>D√©cr√©tez l'√âchelle du Monde :</strong> Un simple hexagone peut repr√©senter une marche rapide ou une journ√©e de voyage. Ce choix initial dictera l'ampleur des migrations, du commerce et des guerres.</li>
                        </ul>
                    </div>
                </div>

                <div class="step-card" id="card-step2">
                    <div class="step-card-header">
                        <span class="step-number">2</span>
                        <h3>√âriger l'√âconomie</h3>
                    </div>
                    <div class="step-card-body">
                        <p>Une cit√© n'est qu'une coquille vide sans l'√¢me de son √©conomie. C'est ici que vous donnez une fonction √† chacun de vos lieux, en utilisant un solveur de d√©pendances sophistiqu√©.</p>
                        <ul>
                           <li><strong>Le Syst√®me de "Tags" √âconomiques :</strong> Le c≈ìur de la logique. Chaque b√¢timent produit ('Grain', 'Outils') et requiert des "tags". Une √©conomie est viable quand tous les besoins sont satisfaits.</li>
                           <li><strong>La Boucle de R√©solution It√©rative :</strong> L'automate analyse les besoins, √©value les b√¢timents possibles en p√©nalisant le manque de diversit√©, puis construit le meilleur candidat. La boucle se r√©p√®te jusqu'√† l'√©quilibre.</li>
                           <li><strong>Le C≈ìur des Cit√©s :</strong> Plongez dans les entrailles de chaque communaut√© pour comprendre les d√©pendances et identifier les opportunit√©s strat√©giques (ou les points de rupture !).</li>
                        </ul>
                    </div>
                </div>

                <div class="step-card" id="card-step3">
                    <div class="step-card-header">
                        <span class="step-number">3</span>
                        <h3>Le Souffle de la Vie</h3>
                    </div>
                    <div class="step-card-body">
                        <p>Le d√©cor est plant√©, l'√©conomie est pr√™te. Il ne manque que l'√©tincelle divine : la "<strong>G√©n√©ration 0</strong>", la population originelle qui fa√ßonnera les premi√®res chroniques.</p>
                        <ul>
                            <li><strong>G√©n√©ration Bas√©e sur l'Emploi :</strong> Le syst√®me ne cr√©e pas d'habitants au hasard. Il g√©n√®re un individu pour chaque poste disponible, en ajustant son √¢ge et son exp√©rience selon le rang (Tier) de l'emploi.</li>
                            <li><strong>Les Liens du Sang et du Destin :</strong> Un algorithme de "matching" social forme les premi√®res familles en priorisant la compatibilit√© de race et de statut social, donnant naissance √† des lign√©es coh√©rentes.</li>
                            <li><strong>Fondez des Dynasties √âternelles :</strong> Ne soyez pas simple spectateur. Cr√©ez vos propres familles nobles, assignez-leur des r√¥les cl√©s et d√©finissez les <strong>lois de succession</strong> (primog√©niture, √©lective...) qui dicteront le futur du pouvoir.</li>
                        </ul>
                    </div>
                </div>
                
                <div class="step-card" id="card-step4">
                    <div class="step-card-header">
                        <span class="step-number">4</span>
                        <h3>D√©cha√Æner le Temps</h3>
                    </div>
                    <div class="step-card-body">
                        <p>Les fondations sont pos√©es, les acteurs sont en place. Lancez la simulation et observez les d√©cennies, voire les si√®cles, s'√©couler sous vos yeux.</p>
                        <ul>
                            <li><strong>Le Grand Cycle de la Vie :</strong> Les dynasties s'agrandissent et s'√©teignent. La mortalit√© est calcul√©e selon l'√¢ge, mais aussi les crises (surpopulation, famines) o√π les familles √† faible prestige sont les plus touch√©es.</li>
                            <li><strong>L'Ambition des Mortels :</strong> Les individus cherchent du travail, sont promus, ou migrent vers d'autres cit√©s en qu√™te d'une vie meilleure, cr√©ant un monde dynamique.</li>
                            <li><strong>Les Annales d'un Monde :</strong> Gr√¢ce √† un journal d'√©v√©nements d√©taill√© et √† un arbre g√©n√©alogique interactif, suivez le destin de chaque √¢me, de l'humble fermier au monarque tout-puissant.</li>
                        </ul>
                    </div>
                </div>

                <div class="step-card" id="card-step5">
                    <div class="step-card-header">
                        <span class="step-number">5</span>
                        <h3>Explorer les Chroniques</h3>
                    </div>
                    <div class="step-card-body">
                        <p>Votre monde a v√©cu, il a une histoire. Il est temps de vous y plonger, d'en extraire les r√©cits et les secrets pour nourrir vos propres aventures.</p>
                        <ul>
                            <li><strong>Le Grimoire des √Çmes :</strong> Consultez des fiches de personnage compl√®tes, incluant leurs attributs convertis sur une √©chelle D&D-like (1-20), leur histoire et leur biographie.</li>
                            <li><strong>Les Art√®res du Royaume :</strong> Visualisez les temps de trajet pr√©cis calcul√©s via un algorithme de recherche de chemin (type Dijkstra), en tenant compte du type de route et du mode de transport.</li>
                            <li><strong>Pr√™t pour la Table de Jeu :</strong> Imprimez les fiches de PNJ, les listes de familles influentes, ou les d√©tails √©conomiques d'un lieu. Tout est pr√™t √† √™tre int√©gr√© dans vos parties de jeu de r√¥le.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <section class="intro-section editor-section">
                <h2>Un Monde Vraiment √† Vous : Les √âditeurs</h2>
                <p>EcoSimRPG n'est pas un syst√®me ferm√©. Brisez les cha√Ænes des r√®gles par d√©faut et prenez le contr√¥le total de la simulation gr√¢ce √† des √©diteurs int√©gr√©s qui vous permettent de red√©finir les fondements m√™mes de votre univers.</p>
            </section>

             <div class="steps-container editor-cards-container">
                <div class="step-card editor-card">
                    <div class="step-card-header">
                        <span class="step-number">üîß</span>
                        <h3>√âditeur de B√¢timents</h3>
                    </div>
                    <div class="step-card-body">
                        <p>Ne vous contentez pas des b√¢timents existants. Forgez les industries et les institutions qui rendront votre monde v√©ritablement unique.</p>
                        <ul>
                            <li><strong>Cr√©ez sans Limites :</strong> Inventez de nouveaux b√¢timents, d√©finissez leurs fonctions, les emplois qu'ils proposent, les salaires et les pr√©requis en prestige pour y travailler.</li>
                            <li><strong>Ma√Ætrisez l'√âconomie :</strong> D√©finissez les "tags" que chaque b√¢timent produit et requiert. L'analyseur en temps r√©el vous guidera pour cr√©er une √©conomie √©quilibr√©e ou volontairement instable.</li>
                            <li><strong>Importez et Partagez :</strong> Sauvegardez vos configurations √©conomiques complexes au format JSON pour les r√©utiliser dans d'autres mondes ou les partager avec d'autres ma√Ætres du jeu.</li>
                        </ul>
                    </div>
                </div>
                 <div class="step-card editor-card">
                    <div class="step-card-header">
                        <span class="step-number">üß¨</span>
                        <h3>√âditeur de Races</h3>
                    </div>
                    <div class="step-card-body">
                        <p>Donnez naissance √† des civilisations in√©dites et d√©finissez leurs particularit√©s culturelles et biologiques.</p>
                        <ul>
                             <li><strong>Inventez des Peuples :</strong> Cr√©ez des races enti√®rement nouvelles ou modifiez celles existantes. D√©finissez leur esp√©rance de vie, leur √¢ge de maturit√©, et donnez-leur une identit√© culturelle via des listes de noms typiques.</li>
                             <li><strong>G√©n√©alogie Complexe :</strong> √âtablissez les r√®gles de compatibilit√© reproductive entre les races. Contr√¥lez l'√©mergence de peuples m√©tiss√©s ou cr√©ez des soci√©t√©s aux lign√©es pures.</li>
                             <li><strong>Sauvegardez vos Cr√©ations :</strong> Tout comme pour les b√¢timents, exportez vos configurations de races en JSON pour les int√©grer facilement dans n'importe quel projet ou les partager avec la communaut√©.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <section class="intro-section editor-section detailed-mechanics-section">
                <h2>Les Rouages du Monde : Le Fonctionnement D√©taill√©</h2>
                <p>Curieux de savoir comment la magie op√®re ? Voici une plong√©e en profondeur dans les m√©canismes qui animent chaque √©tape de la cr√©ation de votre monde. Chaque page est un automate complexe, une horlogerie pr√©cise dont nous vous r√©v√©lons ici les secrets.</p>
            </section>
            
            <div class="steps-container detailed-mechanics-section">
                
                <div class="step-card" id="card-details-step1">
                    <div class="step-card-header">
                        <h3>√âtape 1 : Forger le Royaume (step1.js)</h3>
                    </div>
                    <div class="step-card-body">
                        <p>Cette page est le canevas initial. Elle utilise une grille hexagonale et des algorithmes de graphes pour cr√©er une fondation g√©ographique et logistique coh√©rente.</p>
                        <ul>
                            <li><strong>Placement et Coordonn√©es :</strong> La carte emploie un syst√®me de coordonn√©es axiales (q, r) pour repr√©senter la grille hexagonale. Chaque clic sur la carte est traduit en une coordonn√©e d'hexagone, permettant de placer ou de d√©placer des lieux de mani√®re pr√©cise et intuitive. Cette structure math√©matique est essentielle pour calculer les distances de mani√®re r√©aliste.</li>
                            <li><strong>R√©seau Routier Intelligent :</strong> Lors de la g√©n√©ration automatique, un r√©seau routier est cr√©√© via un algorithme d'<strong>Arbre Recouvrant Minimum</strong>. Ce processus garantit que tous les lieux sont connect√©s entre eux par le chemin le plus court possible, formant l'√©pine dorsale du r√©seau. Pour ajouter du r√©alisme, l'algorithme ajoute ensuite un certain pourcentage de routes suppl√©mentaires non essentielles, cr√©ant des raccourcis et des itin√©raires alternatifs.</li>
                            <li><strong>Hi√©rarchie des Communications :</strong> L'automate reconna√Æt l'importance strat√©gique des grands centres de population. Il est programm√© pour tracer pr√©f√©rentiellement des routes plus directes et de meilleure qualit√© (type 'royale' ou 'comtale') entre la capitale et les villes majeures, simulant ainsi les grands axes commerciaux et militaires d'un royaume.</li>
                             <li><strong>Calcul Logistique :</strong> Le temps de trajet entre deux points n'est pas une simple estimation. Il est calcul√© en prenant en compte la distance physique (d√©finie par l'√©chelle de la carte), la vitesse de base du mode de transport (√† pied, √† cheval, ou en caravane), et un <strong>modificateur de vitesse</strong> propre √† chaque type de route. Un sentier de montagne ralentira drastiquement un voyageur, tandis qu'une route royale l'acc√©l√©rera.</li>
                        </ul>
                    </div>
                </div>

                <div class="step-card" id="card-details-step2">
                    <div class="step-card-header">
                        <h3>√âtape 2 : √âriger l'√âconomie (step2.js)</h3>
                    </div>
                    <div class="step-card-body">
                        <p>Le moteur √©conomique est un solveur de d√©pendances sophistiqu√©. Son but est de distribuer les b√¢timents pour cr√©er une cha√Æne logistique coh√©rente o√π chaque besoin trouve une r√©ponse.</p>
                        <ul>
                            <li><strong>Le Syst√®me de "Tags" √âconomiques :</strong> Le c≈ìur du syst√®me repose sur des concepts abstraits appel√©s "tags". Chaque b√¢timent <strong>produit</strong> des tags (une ferme produit 'Grain', une forge produit 'Outils Simples') et en <strong>requiert</strong> d'autres pour fonctionner (une boulangerie requiert 'Farine'). Une √©conomie est consid√©r√©e comme viable lorsque tous les tags requis par les b√¢timents de la r√©gion sont fournis par d'autres b√¢timents.</li>
                            <li><strong>Boucle de R√©solution It√©rative :</strong> La g√©n√©ration automatique est un processus intelligent en plusieurs passes. √Ä chaque it√©ration, le syst√®me :
                                <ol>
                                    <li>Analyse la totalit√© des b√¢timents pr√©sents et dresse la liste des <strong>besoins non satisfaits</strong> (les tags requis mais non produits).</li>
                                    <li>√âvalue tous les b√¢timents constructibles et leur attribue un score. Un b√¢timent gagne des points s'il peut satisfaire un besoin manquant. Pour encourager la sp√©cialisation r√©gionale et √©viter que tous les villages ne se ressemblent, un <strong>malus de diversit√©</strong> est appliqu√© si un b√¢timent similaire est d√©j√† tr√®s pr√©sent dans d'autres lieux du m√™me type (par exemple, la 10√®me forge dans un village aura un score plus bas).</li>
                                    <li>Le b√¢timent obtenant le meilleur score est alors construit dans le lieu le plus appropri√©. La boucle recommence, r√©√©valuant les besoins avec ce nouveau b√¢timent en place.</li>
                                </ol>
                            </li>
                            <li><strong>Quotas et Hi√©rarchie :</strong> Chaque type de lieu poss√®de un nombre maximum de "slots" de construction, refl√©tant sa taille. Une Capitale peut accueillir des dizaines de b√¢timents, tandis qu'un Hameau n'en supportera qu'une poign√©e. De plus, un lieu ne peut construire que des b√¢timents de son niveau ou d'un niveau inf√©rieur (un Hameau ne peut pas construire une "Acad√©mie Royale"), assurant une progression logique de la complexit√© √©conomique.</li>
                        </ul>
                    </div>
                </div>

                 <div class="step-card" id="card-details-step3">
                    <div class="step-card-header">
                        <h3>√âtape 3 : Le Souffle de la Vie (step3.js)</h3>
                    </div>
                    <div class="step-card-body">
                        <p>La cr√©ation de la population initiale (G√©n√©ration 0) est un processus d√©mographique visant √† cr√©er une population de d√©part cr√©dible, structur√©e et pr√™te √† √©voluer.</p>
                        <ul>
                            <li><strong>G√©n√©ration Bas√©e sur l'Emploi :</strong> La population n'est pas g√©n√©r√©e au hasard. Le syst√®me commence par lister tous les postes de travail disponibles dans la r√©gion. Chaque poste vacant devient le point de d√©part pour la cr√©ation d'un individu. Le <strong>niveau hi√©rarchique (Tier)</strong> de l'emploi est crucial : il d√©termine l'√¢ge de la personne g√©n√©r√©e. Un dirigeant de Tier 0 sera plus √¢g√© et exp√©riment√©, tandis qu'un ouvrier de Tier 5 sera plus jeune.</li>
                            <li><strong>Formation des Familles :</strong> Une fois les individus cr√©√©s, un algorithme de "matching" social tente de former des couples. Il priorise les individus de m√™me race et de statut social similaire (m√™me Tier d'emploi), et v√©rifie la compatibilit√© reproductive d√©finie dans les r√®gles. Les individus restants fondent des lign√©es de c√©libataires.</li>
                            <li><strong>D√©mographie Initiale :</strong> Pour les couples form√©s, le syst√®me simule une descendance. Le nombre d'enfants est bas√© sur le d√©sir d'enfant moyen des deux parents. L'√¢ge de ces enfants est calcul√© pour √™tre logiquement inf√©rieur √† celui de leurs parents, cr√©ant ainsi une premi√®re g√©n√©ration avec une pyramide des √¢ges coh√©rente.</li>
                            <li><strong>Simulation de l'Exp√©rience de Vie :</strong> Pour √©viter que tous les personnages de 40 ans aient les m√™mes comp√©tences, une fonction simule l'exp√©rience de vie accumul√©e. Elle calcule les gains de prestige et de statistiques qu'un personnage aurait d√ª recevoir chaque mois entre l'√¢ge adulte et son √¢ge actuel. Ce calcul int√®gre un <strong>facteur de d√©clin</strong>, simulant le fait que l'on apprend moins vite avec l'√¢ge, ce qui donne des v√©t√©rans sages mais pas surpuissants.</li>
                             <li><strong>Structure du Pouvoir :</strong> D√®s la fin de la g√©n√©ration, le syst√®me identifie les dirigeants (Tier 0) et applique imm√©diatement les titres nobiliaires (H√©ritier, Patriarche, etc.) aux membres de leur famille. Cela assure qu'une hi√©rarchie politique claire et fonctionnelle est en place avant m√™me le d√©but de la simulation temporelle.</li>
                        </ul>
                    </div>
                </div>

                 <div class="step-card" id="card-details-step4">
                    <div class="step-card-header">
                        <h3>√âtape 4 : D√©cha√Æner le Temps (step4.js)</h3>
                    </div>
                    <div class="step-card-body">
                        <p>Le moteur de simulation est une boucle complexe qui ex√©cute, chaque "mois" (ou "tick"), une s√©rie d'√©v√©nements et de d√©cisions pour chaque individu, cr√©ant une chronique vivante.</p>
                        <ul>
                            <li><strong>Le Cycle de la Vie et la Faucheuse :</strong> √Ä chaque tick, la probabilit√© de d√©c√®s d'un personnage est √©valu√©e. Ce n'est pas un simple jet de d√©. C'est une combinaison de facteurs :
                                <ul>
                                    <li><strong>La Vieillesse :</strong> La probabilit√© de mourir augmente de mani√®re exponentielle apr√®s 70% de l'esp√©rance de vie de la race, rendant la mort de vieillesse quasi in√©vitable mais impr√©visible.</li>
                                    <li><strong>Les Crises :</strong> En cas de surpopulation (d√©finie par un d√©passement de 150% de la population de d√©part), une chance de mourir de "maladie" est introduite. Cette probabilit√© est plus √©lev√©e pour les personnages √¢g√©s et pour les membres de familles √† faible prestige, simulant un acc√®s in√©gal aux ressources.</li>
                                    <li><strong>Le Hasard :</strong> Une infime probabilit√© de base de mourir d'un "accident" existe √† chaque instant, repr√©sentant les al√©as de la vie.</li>
                                </ul>
                            </li>
                            <li><strong>La Couronne et l'H√©ritage :</strong> √Ä la mort d'un dirigeant (Tier 0), une proc√©dure de succession est enclench√©e. Elle respecte scrupuleusement la loi du lieu (<code>inheritanceLaw</code>). En mode <strong>primog√©niture</strong>, l'automate recherche un h√©ritier valide en descendant l'arbre g√©n√©alogique (enfants, puis petits-enfants), puis en le remontant (fr√®res et s≈ìurs, puis neveux). En mode <strong>√©lectif</strong>, le membre de la famille avec le plus haut score de prestige est d√©sign√©. Si aucune solution n'est trouv√©e, le pouvoir devient vacant et la famille la plus prestigieuse du lieu s'en empare.</li>
                            <li><strong>Ambition et Carri√®re :</strong> La vie professionnelle est dynamique. Un personnage sans emploi v√©rifiera r√©guli√®rement les offres disponibles pour lesquelles son prestige est suffisant. Un employ√© peut √™tre promu √† un poste de rang sup√©rieur au sein de son b√¢timent si une place se lib√®re, avec une priorit√© donn√©e au plus m√©ritant (le plus prestigieux). En cas de stagnation, un personnage peut d√©cider de migrer vers une autre ville offrant de meilleures opportunit√©s et une plus grande satisfaction.</li>
                            <li><strong>L'Exp√©rience et le D√©clin :</strong> La progression n'est pas lin√©aire. Chaque mois, les personnages gagnent des points de prestige et de statistiques. Cependant, ce gain est affect√© par un <strong>multiplicateur de rendement d√©croissant</strong>. Apr√®s 25 ans de carri√®re et pass√© 70% de son esp√©rance de vie, un personnage verra sa progression ralentir consid√©rablement, simulant le plateau de comp√©tence et le d√©clin physique de la fin de carri√®re.</li>
                        </ul>
                    </div>
                </div>

                 <div class="step-card" id="card-details-step5">
                    <div class="step-card-header">
                        <h3>√âtape 5 : Explorer les Chroniques (step5.js)</h3>
                    </div>
                    <div class="step-card-body">
                        <p>L'explorateur de donn√©es est une interface de visualisation qui transforme les donn√©es brutes de la simulation en informations claires et exploitables pour le jeu de r√¥le.</p>
                        <ul>
                            <li><strong>Conversion de Donn√©es Brutes :</strong> Les statistiques des personnages dans la simulation (force, intelligence...) sont des valeurs brutes qui peuvent atteindre plusieurs milliers de points. Pour les rendre utilisables en JDR, un script les convertit sur une √©chelle de 1 √† 20, similaire √† D&D. Cette conversion n'est pas lin√©aire mais suit une courbe logarithmique : il faut beaucoup plus de points bruts pour passer de 17 √† 18 que pour passer de 9 √† 10.</li>
                            <li><strong>Logistique et Pathfinding :</strong> Le calcul des temps de trajet n'est pas une simple ligne droite. Le syst√®me utilise un algorithme de recherche de chemin le plus court (de type Dijkstra). Il construit un graphe du r√©seau routier et calcule l'itin√©raire optimal entre deux villes, en pond√©rant chaque segment de route par son type (royal, marchand, etc.) et le mode de transport, pour fournir des temps de parcours r√©alistes.</li>
                            <li><strong>Agr√©gation G√©n√©alogique :</strong> Pour afficher les arbres familiaux, le script parcourt r√©cursivement les liens de parent√© (parents, enfants, conjoints) de toute la population pour reconstruire dynamiquement la structure de chaque famille et l'afficher de mani√®re hi√©rarchique et interactive.</li>
                        </ul>
                    </div>
                </div>

                <div class="step-card" id="card-details-editor">
                    <div class="step-card-header">
                        <h3>Les √âditeurs (editeur.js, etc.)</h3>
                    </div>
                    <div class="step-card-body">
                        <p>Les √©diteurs sont des outils puissants qui vous donnent les cl√©s du moteur de simulation, vous permettant de modifier les r√®gles fondamentales du jeu.</p>
                        <ul>
                            <li><strong>Couche de Personnalisation :</strong> Les √©diteurs ne modifient pas les fichiers de base. Ils cr√©ent une couche de donn√©es personnalis√©es dans le stockage local de votre navigateur. Au lancement, l'application d√©tecte cette couche et vous propose de l'utiliser √† la place des r√®gles par d√©faut. Cela garantit que les donn√©es originales restent intactes et que vos cr√©ations sont portables.</li>
                            <li><strong>Analyseur √âconomique en Temps R√©el :</strong> L'√©diteur de b√¢timents est un v√©ritable outil de diagnostic. Chaque fois que vous modifiez un b√¢timent, il recalcule l'int√©gralit√© de la cha√Æne de production de votre configuration. Il maintient une liste de tous les "tags" √©conomiques et vous alerte instantan√©ment sur les d√©s√©quilibres : les "tags orphelins" (ressources n√©cessaires mais jamais produites) et les "tags jamais requis" (ressources produites mais jamais utilis√©es).</li>
                            <li><strong>Modularit√© et Portabilit√© :</strong> La fonction d'exportation au format JSON transforme vos configurations complexes de b√¢timents ou de races en un simple fichier texte. Vous pouvez ainsi archiver diff√©rentes versions de vos mondes (un monde "low fantasy", un monde "high magic"...), les partager avec d'autres ma√Ætres de jeu, ou les r√©importer dans un autre navigateur, assurant une flexibilit√© totale.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        const selectionView = document.getElementById('mode-selection-view');
        const forgeView = document.getElementById('forge-view');
        
        const selectForgeBtn = document.getElementById('select-forge-mode');
        const selectAutoBtn = document.getElementById('select-auto-mode');

        // G√®re le clic sur le "Mode Forge"
        selectForgeBtn.addEventListener('click', () => {
            selectionView.classList.add('hidden'); // Masque l'√©cran de choix
            forgeView.classList.remove('hidden');   // Affiche le contenu principal
        });

        // G√®re le clic sur le "Mode Full Auto"
        selectAutoBtn.addEventListener('click', () => {
            // Affiche un message de chargement et redirige
            selectAutoBtn.innerHTML = `
                <div class="icon">üöÄ</div>
                <h3>Lancement...</h3>
                <p>La g√©n√©ration automatique est en cours. Veuillez patienter.</p>
            `;
            window.location.href = 'autorun.html';
        });
    });
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoSimRPG - √âtape 2 : Configuration des Lieux</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="step1-style.css">
    <link rel="stylesheet" href="step2-style.css">
</head>
<body>

<nav class="floating-menu">
    <div class="menu-title">EcoSimRPG</div>
    <a href="index.html" id="nav-index">Accueil</a>
    <a href="step1.html" id="nav-step1">√âtape 1<br><small>(Carte)</small></a>
    <a href="step2.html" id="nav-step2" class="active">√âtape 2<br><small>(Conf. Lieux)</small></a>
    <a href="step3.html" id="nav-step3">√âtape 3<br><small>(Gen.0)</small></a>
</nav>

    <div class="main-content-wrapper">
        <div class="main-content" id="main-content">
            <header id="top-bar-step2">
                <div class="header-title-group">
                    <h1>Configuration des Lieux</h1>
                    <button id="reroll-region-btn" class="btn-edit" title="Relancer la g√©n√©ration automatique pour toute la r√©gion">üé≤ Relancer R√©gion (Automatique)</button>
                    <button id="manual-config-btn" class="btn-edit" title="Configurer manuellement les b√¢timents de la r√©gion">‚úçÔ∏è R√©gion Personnalis√©e</button>
                </div>
                <div class="header-info">
                    <span id="region-name-display"></span>
                    <button id="validate-all-btn" class="btn-primary">Tout Valider et Passer √† l'√âtape 3</button>
                </div>
            </header>

            <div id="generation-overlay">
                <div class="overlay-content">
                    <div class="overlay-icon">üèõÔ∏è</div>
                    <h1>Les architectes sont √† l'≈ìuvre...</h1>
                    <p>Cr√©ation d'un monde coh√©rent et organique.</p>
                    <div class="spinner"></div>
                </div>
            </div>

            <main id="places-container">
                </main>

            <div id="pagination-controls">
                <button id="prev-page-btn" class="btn-secondary">Pr√©c√©dent</button>
                <span id="page-info"></span>
                <button id="next-page-btn" class="btn-secondary">Suivant</button>
            </div>
        </div>

        <aside id="status-panel" class="hidden">
            <h3>√âtat de la R√©gion</h3>
            <div id="status-content">
                <p>Ajoutez des b√¢timents pour v√©rifier les pr√©requis.</p>
            </div>
        </aside>
    </div>


    <dialog id="validation-modal">
        <div class="modal-header">
            <h3 id="validation-modal-title">Validation en cours...</h3>
            <button class="modal-close-btn" onclick="this.closest('dialog').close()">&times;</button>
        </div>
        <div id="validation-modal-content" style="padding: 20px; text-align: center;">
            <p>Tous les lieux ont √©t√© valid√©s avec succ√®s !</p>
            <p>Vous allez √™tre redirig√© vers l'√©tape de simulation.</p>
            <div class="spinner"></div>
        </div>
    </dialog>

    <dialog id="analysis-modal">
        <div class="modal-header" id="analysis-modal-header">
            <h3 id="analysis-modal-title">Analyse du Lieu</h3>
            <button class="modal-close-btn" onclick="this.closest('dialog').close()">&times;</button>
        </div>
        <div id="analysis-modal-content">
            <div class="analysis-section" id="internal-analysis">
                <h4>Logique Interne et Synergies</h4>
                <div class="analysis-details"></div>
            </div>
            <div class="analysis-section" id="external-analysis">
                <h4>Commerce et D√©pendances (Import/Export)</h4>
                <div class="analysis-details"></div>
            </div>
        </div>
    </dialog>

    <dialog id="add-building-modal">
        <div class="modal-header">
            <h3 id="add-building-modal-title">Ajouter un B√¢timent</h3>
            <button class="modal-close-btn" onclick="this.closest('dialog').close()">&times;</button>
        </div>
        <div id="add-building-modal-content">
            </div>
    </dialog>


    <script src="races.js"></script>
    <script src="buildings.js"></script>
    <script src="step2.js"></script>
</body>
</html>